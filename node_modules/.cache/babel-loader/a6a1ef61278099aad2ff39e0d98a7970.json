{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\Andr\\xE9 Jord\\xE3o\\\\Desktop\\\\talkdesk\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport { useState, useEffect } from 'react';\nimport data from '../../../data/apps.json'; //Sort the app items by ascending sum of price\n\nconst sortBySumPriceAsc = (a, b) => {\n  let sumPriceA = 0;\n  let sumPriceB = 0;\n  a.subscriptions.map(subscription => sumPriceA += subscription.price);\n  b.subscriptions.map(subscription => sumPriceB += subscription.price);\n  return sumPriceA > sumPriceB && 1 || sumPriceA === sumPriceB ? 0 : -1;\n}; //Filter the list of app items by app name\n\n\nconst filterByAppName = (app, name) => {\n  if (app.name.length > 0) {\n    return app.name.toLowerCase().includes(name.toLowerCase());\n  } else return 1;\n}; //Custom hook for using apps\n\n\nexport const useApps = (category, name, appsPerPage, currentPage) => {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        apps = _useState2[0],\n        setApps = _useState2[1];\n\n  const indexOfLastAppItem = currentPage * appsPerPage;\n  const indexOfFirstAppItem = indexOfLastAppItem - appsPerPage;\n\n  const _useState3 = useState(0),\n        _useState4 = _slicedToArray(_useState3, 2),\n        total = _useState4[0],\n        setTotal = _useState4[1]; //Conditional filter to handle\n\n\n  const conditionalFilter = (arr, condition, condition1) => {\n    if (condition) return [...arr.filter(condition1)];else return [...arr];\n  };\n  /**\r\n   *\r\n   * Optim\r\n   * Skips the effect if [category, name, indexOfFirstAppItem, indexOfLastAppItem, total] have not been changed\r\n   */\n\n\n  useEffect(() => {\n    //Filtered apps by app name and category, uses the conditional filter to check if a category has been given in the parent component\n    const filteredApps = conditionalFilter(data.sort(sortBySumPriceAsc).filter(app => filterByAppName(app, name)), category, app => app.categories.includes(category)); //Sets total length of filtered apps - useful to know the total pages we might need before slicing it\n\n    setTotal(filteredApps.length); //Slices the array by the apps per page needed. Default is 3.\n\n    const sliced = filteredApps.slice(indexOfFirstAppItem, indexOfLastAppItem);\n    setApps(sliced);\n  }, [category, name, indexOfFirstAppItem, indexOfLastAppItem, total]);\n  return [apps, total];\n};","map":{"version":3,"sources":["C:/Users/André Jordão/Desktop/talkdesk/src/pages/AppList/hooks/useApps.js"],"names":["useState","useEffect","data","sortBySumPriceAsc","a","b","sumPriceA","sumPriceB","subscriptions","map","subscription","price","filterByAppName","app","name","length","toLowerCase","includes","useApps","category","appsPerPage","currentPage","apps","setApps","indexOfLastAppItem","indexOfFirstAppItem","total","setTotal","conditionalFilter","arr","condition","condition1","filter","filteredApps","sort","categories","sliced","slice"],"mappings":";AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,IAAP,MAAiB,yBAAjB,C,CAEA;;AACA,MAAMC,iBAAiB,GAAG,CAACC,CAAD,EAAIC,CAAJ,KAAU;AAClC,MAAIC,SAAS,GAAG,CAAhB;AACA,MAAIC,SAAS,GAAG,CAAhB;AACAH,EAAAA,CAAC,CAACI,aAAF,CAAgBC,GAAhB,CAAoBC,YAAY,IAAKJ,SAAS,IAAII,YAAY,CAACC,KAA/D;AACAN,EAAAA,CAAC,CAACG,aAAF,CAAgBC,GAAhB,CAAoBC,YAAY,IAAKH,SAAS,IAAIG,YAAY,CAACC,KAA/D;AACA,SAAQL,SAAS,GAAGC,SAAZ,IAAyB,CAA1B,IAAgCD,SAAS,KAAKC,SAA9C,GAA0D,CAA1D,GAA8D,CAAC,CAAtE;AACD,CAND,C,CAQA;;;AACA,MAAMK,eAAe,GAAG,CAACC,GAAD,EAAMC,IAAN,KAAe;AACrC,MAAID,GAAG,CAACC,IAAJ,CAASC,MAAT,GAAkB,CAAtB,EAAyB;AACvB,WAAOF,GAAG,CAACC,IAAJ,CAASE,WAAT,GAAuBC,QAAvB,CAAgCH,IAAI,CAACE,WAAL,EAAhC,CAAP;AACD,GAFD,MAEO,OAAO,CAAP;AACR,CAJD,C,CAMA;;;AACA,OAAO,MAAME,OAAO,GAAG,CAACC,QAAD,EAAWL,IAAX,EAAiBM,WAAjB,EAA8BC,WAA9B,KAA8C;AAAA,oBAC3CrB,QAAQ,CAAC,EAAD,CADmC;AAAA;AAAA,QAC5DsB,IAD4D;AAAA,QACtDC,OADsD;;AAEnE,QAAMC,kBAAkB,GAAGH,WAAW,GAAGD,WAAzC;AACA,QAAMK,mBAAmB,GAAGD,kBAAkB,GAAGJ,WAAjD;;AAHmE,qBAIzCpB,QAAQ,CAAC,CAAD,CAJiC;AAAA;AAAA,QAI5D0B,KAJ4D;AAAA,QAIrDC,QAJqD,kBAMnE;;;AACA,QAAMC,iBAAiB,GAAG,CAACC,GAAD,EAAMC,SAAN,EAAiBC,UAAjB,KAAgC;AACxD,QAAID,SAAJ,EAAe,OAAO,CAAC,GAAGD,GAAG,CAACG,MAAJ,CAAWD,UAAX,CAAJ,CAAP,CAAf,KACK,OAAO,CAAC,GAAGF,GAAJ,CAAP;AACN,GAHD;AAKA;;;;;;;AAKA5B,EAAAA,SAAS,CAAC,MAAM;AACd;AACA,UAAMgC,YAAY,GAAGL,iBAAiB,CACpC1B,IAAI,CAACgC,IAAL,CAAU/B,iBAAV,EAA6B6B,MAA7B,CAAoCnB,GAAG,IAAID,eAAe,CAACC,GAAD,EAAMC,IAAN,CAA1D,CADoC,EAEpCK,QAFoC,EAGpCN,GAAG,IAAIA,GAAG,CAACsB,UAAJ,CAAelB,QAAf,CAAwBE,QAAxB,CAH6B,CAAtC,CAFc,CAQd;;AACAQ,IAAAA,QAAQ,CAACM,YAAY,CAAClB,MAAd,CAAR,CATc,CAWd;;AACA,UAAMqB,MAAM,GAAGH,YAAY,CAACI,KAAb,CAAmBZ,mBAAnB,EAAwCD,kBAAxC,CAAf;AACAD,IAAAA,OAAO,CAACa,MAAD,CAAP;AACD,GAdQ,EAcN,CAACjB,QAAD,EAAWL,IAAX,EAAiBW,mBAAjB,EAAsCD,kBAAtC,EAA0DE,KAA1D,CAdM,CAAT;AAgBA,SAAO,CAACJ,IAAD,EAAOI,KAAP,CAAP;AACD,CAlCM","sourcesContent":["import { useState, useEffect } from 'react';\r\nimport data from '../../../data/apps.json';\r\n\r\n//Sort the app items by ascending sum of price\r\nconst sortBySumPriceAsc = (a, b) => {\r\n  let sumPriceA = 0;\r\n  let sumPriceB = 0;\r\n  a.subscriptions.map(subscription => (sumPriceA += subscription.price));\r\n  b.subscriptions.map(subscription => (sumPriceB += subscription.price));\r\n  return (sumPriceA > sumPriceB && 1) || sumPriceA === sumPriceB ? 0 : -1;\r\n};\r\n\r\n//Filter the list of app items by app name\r\nconst filterByAppName = (app, name) => {\r\n  if (app.name.length > 0) {\r\n    return app.name.toLowerCase().includes(name.toLowerCase());\r\n  } else return 1;\r\n};\r\n\r\n//Custom hook for using apps\r\nexport const useApps = (category, name, appsPerPage, currentPage) => {\r\n  const [apps, setApps] = useState([]);\r\n  const indexOfLastAppItem = currentPage * appsPerPage;\r\n  const indexOfFirstAppItem = indexOfLastAppItem - appsPerPage;\r\n  const [total, setTotal] = useState(0);\r\n\r\n  //Conditional filter to handle\r\n  const conditionalFilter = (arr, condition, condition1) => {\r\n    if (condition) return [...arr.filter(condition1)];\r\n    else return [...arr];\r\n  };\r\n\r\n  /**\r\n   *\r\n   * Optim\r\n   * Skips the effect if [category, name, indexOfFirstAppItem, indexOfLastAppItem, total] have not been changed\r\n   */\r\n  useEffect(() => {\r\n    //Filtered apps by app name and category, uses the conditional filter to check if a category has been given in the parent component\r\n    const filteredApps = conditionalFilter(\r\n      data.sort(sortBySumPriceAsc).filter(app => filterByAppName(app, name)),\r\n      category,\r\n      app => app.categories.includes(category)\r\n    );\r\n\r\n    //Sets total length of filtered apps - useful to know the total pages we might need before slicing it\r\n    setTotal(filteredApps.length);\r\n\r\n    //Slices the array by the apps per page needed. Default is 3.\r\n    const sliced = filteredApps.slice(indexOfFirstAppItem, indexOfLastAppItem);\r\n    setApps(sliced);\r\n  }, [category, name, indexOfFirstAppItem, indexOfLastAppItem, total]);\r\n\r\n  return [apps, total];\r\n};\r\n"]},"metadata":{},"sourceType":"module"}