{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\Andr\\xE9 Jord\\xE3o\\\\Desktop\\\\talkdesk\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Andr\\xE9 Jord\\xE3o\\\\Desktop\\\\talkdesk\\\\src\\\\pages\\\\AppList\\\\AppList.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport styles from './AppList.module.css';\nimport NavBar from '../../components/NavBar/NavBar';\nimport SearchBar from '../../components/SearchBar/SearchBar.jsx';\nimport Box from '../../components/Box/Box';\nimport Pagination from '../../components/Pagination/Pagination';\nimport NavLink from '../../components/NavLink/NavLink';\nimport data from '../../data/apps.json';\n\nconst sortBySumPriceAsc = (a, b) => {\n  let sumPriceA = 0;\n  let sumPriceB = 0;\n  a.subscriptions.map(subscription => sumPriceA += subscription.price);\n  b.subscriptions.map(subscription => sumPriceB += subscription.price);\n  return sumPriceA > sumPriceB && 1 || sumPriceA === sumPriceB ? 0 : -1;\n};\n\nconst filterByAppName = (app, name) => {\n  if (app.name.length > 0) {\n    return app.name.toLowerCase().includes(name.toLowerCase());\n  } else return 1;\n};\n\nconst FilteredApps = ({\n  apps\n}) => {\n  //const [apps] = sortPriceAsc(filterByName(filterByCategory(useApps())));\n  //apps.filter(app => app.name.toLowerCase().includes(name.toLowerCase()));\n  return apps.length === 0 ? React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }, \"No results were found!\") : apps.map(app => React.createElement(Box, {\n    key: app.id,\n    title: app.name,\n    description: app.description,\n    tags: app.categories,\n    subscriptions: app.subscriptions,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }));\n};\n\nconst useCategories = () => {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        categories = _useState2[0],\n        setCategories = _useState2[1];\n\n  useEffect(() => {\n    setCategories(data.map(item => item.categories).reduce((p, c) => [...p, ...c]).filter((item, i, arr) => arr.indexOf(item) === i).sort());\n  }, []);\n  return [categories];\n};\n\nconst useApps = (category, name, appsPerPage, currentPage) => {\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        apps = _useState4[0],\n        setApps = _useState4[1];\n\n  const indexOfLastAppItem = currentPage * appsPerPage;\n  const indexOfFirstAppItem = indexOfLastAppItem - appsPerPage;\n\n  const _useState5 = useState(0),\n        _useState6 = _slicedToArray(_useState5, 2),\n        total = _useState6[0],\n        setTotal = _useState6[1];\n\n  const conditionalFilter = (arr, condition, condition1) => {\n    if (condition) return [...arr.filter(condition1)];else return [...arr];\n  };\n\n  useEffect(() => {\n    const filteredApps = conditionalFilter(data.sort(sortBySumPriceAsc).filter(app => filterByAppName(app, name)), category, app => app.categories.includes(category));\n    console.log(total, filteredApps);\n    setTotal(filteredApps.length);\n    const sliced = filteredApps.slice(indexOfFirstAppItem, indexOfLastAppItem);\n    setApps(sliced); //setApps(currentAppItems);\n  }, [category, name, indexOfFirstAppItem, indexOfLastAppItem, total]);\n  return [apps, total];\n};\n\nconst AppList = () => {\n  const _useCategories = useCategories(),\n        _useCategories2 = _slicedToArray(_useCategories, 1),\n        categories = _useCategories2[0];\n\n  const _useState7 = useState(null),\n        _useState8 = _slicedToArray(_useState7, 2),\n        currentCategory = _useState8[0],\n        setCurrentCategory = _useState8[1];\n\n  const _useState9 = useState(''),\n        _useState10 = _slicedToArray(_useState9, 2),\n        searchFilter = _useState10[0],\n        setSearchFilter = _useState10[1];\n\n  const _useState11 = useState(1),\n        _useState12 = _slicedToArray(_useState11, 2),\n        currentPage = _useState12[0],\n        setCurrentPage = _useState12[1];\n\n  const _useApps = useApps(currentCategory, searchFilter, 3, currentPage),\n        _useApps2 = _slicedToArray(_useApps, 2),\n        apps = _useApps2[0],\n        total = _useApps2[1];\n\n  return React.createElement(\"div\", {\n    className: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, React.createElement(NavBar, {\n    title: \"Categories\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, React.createElement(NavLink, {\n    onClick: () => {\n      setCurrentCategory(null);\n    },\n    name: \"All Categories\",\n    to: `/`,\n    active: !currentCategory,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }), categories && categories.map((category, i) => React.createElement(NavLink, {\n    key: i,\n    onClick: () => {\n      setCurrentCategory(category);\n    },\n    name: category,\n    active: currentCategory === category,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }))), React.createElement(\"section\", {\n    className: styles.appList,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, React.createElement(\"header\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, React.createElement(SearchBar, {\n    onValueChange: setSearchFilter,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  })), React.createElement(\"ul\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, apps.map(app => React.createElement(Box, {\n    key: app.id,\n    title: app.name,\n    description: app.description,\n    tags: app.categories,\n    subscriptions: app.subscriptions,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }))), React.createElement(Pagination, {\n    numberOfPages: total === 0 ? 1 : Math.ceil(total / 3),\n    activePage: currentPage,\n    onPageChange: setCurrentPage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  })));\n};\n\nexport default AppList;","map":{"version":3,"sources":["C:/Users/André Jordão/Desktop/talkdesk/src/pages/AppList/AppList.jsx"],"names":["React","useState","useEffect","styles","NavBar","SearchBar","Box","Pagination","NavLink","data","sortBySumPriceAsc","a","b","sumPriceA","sumPriceB","subscriptions","map","subscription","price","filterByAppName","app","name","length","toLowerCase","includes","FilteredApps","apps","id","description","categories","useCategories","setCategories","item","reduce","p","c","filter","i","arr","indexOf","sort","useApps","category","appsPerPage","currentPage","setApps","indexOfLastAppItem","indexOfFirstAppItem","total","setTotal","conditionalFilter","condition","condition1","filteredApps","console","log","sliced","slice","AppList","currentCategory","setCurrentCategory","searchFilter","setSearchFilter","setCurrentPage","container","appList","Math","ceil"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport styles from './AppList.module.css';\r\nimport NavBar from '../../components/NavBar/NavBar';\r\nimport SearchBar from '../../components/SearchBar/SearchBar.jsx';\r\nimport Box from '../../components/Box/Box';\r\nimport Pagination from '../../components/Pagination/Pagination';\r\nimport NavLink from '../../components/NavLink/NavLink';\r\nimport data from '../../data/apps.json';\r\n\r\nconst sortBySumPriceAsc = (a, b) => {\r\n  let sumPriceA = 0;\r\n  let sumPriceB = 0;\r\n  a.subscriptions.map(subscription => (sumPriceA += subscription.price));\r\n  b.subscriptions.map(subscription => (sumPriceB += subscription.price));\r\n  return (sumPriceA > sumPriceB && 1) || sumPriceA === sumPriceB ? 0 : -1;\r\n};\r\n\r\nconst filterByAppName = (app, name) => {\r\n  if (app.name.length > 0) {\r\n    return app.name.toLowerCase().includes(name.toLowerCase());\r\n  } else return 1;\r\n};\r\n\r\nconst FilteredApps = ({ apps }) => {\r\n  //const [apps] = sortPriceAsc(filterByName(filterByCategory(useApps())));\r\n\r\n  //apps.filter(app => app.name.toLowerCase().includes(name.toLowerCase()));\r\n  return apps.length === 0 ? (\r\n    <h1>No results were found!</h1>\r\n  ) : (\r\n    apps.map(app => (\r\n      <Box\r\n        key={app.id}\r\n        title={app.name}\r\n        description={app.description}\r\n        tags={app.categories}\r\n        subscriptions={app.subscriptions}\r\n      ></Box>\r\n    ))\r\n  );\r\n};\r\n\r\nconst useCategories = () => {\r\n  const [categories, setCategories] = useState([]);\r\n\r\n  useEffect(() => {\r\n    setCategories(\r\n      data\r\n        .map(item => item.categories)\r\n        .reduce((p, c) => [...p, ...c])\r\n        .filter((item, i, arr) => arr.indexOf(item) === i)\r\n        .sort()\r\n    );\r\n  }, []);\r\n  return [categories];\r\n};\r\n\r\nconst useApps = (category, name, appsPerPage, currentPage) => {\r\n  const [apps, setApps] = useState([]);\r\n  const indexOfLastAppItem = currentPage * appsPerPage;\r\n  const indexOfFirstAppItem = indexOfLastAppItem - appsPerPage;\r\n  const [total, setTotal] = useState(0);\r\n\r\n  const conditionalFilter = (arr, condition, condition1) => {\r\n    if (condition) return [...arr.filter(condition1)];\r\n    else return [...arr];\r\n  };\r\n\r\n  useEffect(() => {\r\n    const filteredApps = conditionalFilter(\r\n      data.sort(sortBySumPriceAsc).filter(app => filterByAppName(app, name)),\r\n      category,\r\n      app => app.categories.includes(category)\r\n    );\r\n console.log(total, filteredApps)\r\n    setTotal(filteredApps.length);\r\n\r\n    const sliced = filteredApps.slice(indexOfFirstAppItem, indexOfLastAppItem);\r\n    setApps(sliced);\r\n\r\n    //setApps(currentAppItems);\r\n  }, [category, name, indexOfFirstAppItem, indexOfLastAppItem, total]);\r\n\r\n  return [apps, total];\r\n};\r\n\r\nconst AppList = () => {\r\n  const [categories] = useCategories();\r\n  const [currentCategory, setCurrentCategory] = useState(null);\r\n  const [searchFilter, setSearchFilter] = useState('');\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [apps, total] = useApps(currentCategory, searchFilter, 3, currentPage);\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <NavBar title='Categories'>\r\n        <NavLink\r\n          onClick={() => {\r\n            setCurrentCategory(null);\r\n          }}\r\n          name='All Categories'\r\n          to={`/`}\r\n          active={!currentCategory}\r\n        ></NavLink>\r\n        {categories &&\r\n          categories.map((category, i) => (\r\n            <NavLink\r\n              key={i}\r\n              onClick={() => {\r\n                setCurrentCategory(category);\r\n              }}\r\n              name={category}\r\n              active={currentCategory === category}\r\n            ></NavLink>\r\n          ))}\r\n      </NavBar>\r\n\r\n      <section className={styles.appList}>\r\n        <header>\r\n          <SearchBar onValueChange={setSearchFilter} />\r\n        </header>\r\n        <ul>\r\n          {apps.map(app => (\r\n            <Box\r\n              key={app.id}\r\n              title={app.name}\r\n              description={app.description}\r\n              tags={app.categories}\r\n              subscriptions={app.subscriptions}\r\n            ></Box>\r\n          ))}\r\n        </ul>\r\n        <Pagination\r\n          numberOfPages={total === 0 ? 1 : Math.ceil(total / 3)}\r\n          activePage={currentPage}\r\n          onPageChange={setCurrentPage}\r\n        />\r\n      </section>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AppList;\r\n"]},"metadata":{},"sourceType":"module"}